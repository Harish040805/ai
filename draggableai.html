<div id="newton-ai-widget" style="position:relative; width:100%; height:100%;"> <button id="newton-dragBtn" style="position:absolute; top:90%; left:5%; transform:translate(-50%,-50%); padding:20px 24px; background-color:#0077cc; color:white; border:5px solid white; border-radius:50%; cursor:grab; font-size:20px; font-weight:bold; box-shadow:0 4px 8px rgba(0,0,0,0.2); user-select:none; z-index:1000;">AI</button> <iframe id="newton-myIframe" style="position:fixed; top:0; right:0; width:20vw; height:100vh; border:none; background:#fff; box-shadow:-4px 0 12px rgba(0,0,0,0.2); display:none; z-index:999;" srcdoc=" <!DOCTYPE html> <html> <head> <style> newton-body { margin:0; font-family:Arial,sans-serif; background:#fff; display:flex; flex-direction:column; height:100%; } #newton-header { position:relative; background:#0077cc; color:white; text-align:center; padding:12px; font-weight:bold; font-size:18px; } #newton-closeBtn { position:absolute; top:10px; right:10px; padding:6px 12px; background:#ff0000; color:white; border:none; border-radius:6px; cursor:pointer; font-weight:bold; font-size:14px; box-shadow:0 2px 6px rgba(0,0,0,0.2); } #newton-closeBtn:hover { color:#ccc; } #newton-content { flex:1; padding:10px; display:flex; flex-direction:column; gap:10px; } newton-button.askBtn { padding:8px; background:#0077cc; color:white; border:none; border-radius:6px; font-weight:bold; cursor:pointer; } newton-button.askBtn:hover { background:#005fa3; } #newton-response { margin-top:10px; font-size:14px; color:#333; overflow-y:auto; max-height:70%; border-top:1px solid #ccc; padding-top:8px; } </style> </head> <body> <div id='newton-header'> Ask AI <button id='newton-closeBtn'>X</button> </div> <div id='newton-content'><input type='text' id='newton-userInput' placeholder='Type your question...' /> <button class='newton-askBtn' id='newton-askBtn'>Ask AI</button> <div id='newton-response'>Response will appear here...</div> </div> <script> const neton-askBtn = document.getElementById('newton-askBtn'); const newton-responseDiv = document.getElementById('newton-response'); const newton-userInput = document.getElementById('newton-userInput'); const newton-closeBtn = document.getElementById('newton-closeBtn'); newton-closeBtn.addEventListener('click', ()=> parent.postMessage('newton-closeIframe','*')); newton-askBtn.addEventListener('click', async ()=> { const newton-question = userInput.value.trim(); if(!newton-question){ newton-responseDiv.innerHTML='<span style=color:red;>Please enter a question.</span>'; return; } newton-responseDiv.innerHTML='<em>Thinking...</em>'; try { const newton-res = await fetch('https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash:generateContent?key=AIzaSyC5ab-HZmvtoTEXMRBMb4-tPpwD2yMVF1A', { method:'POST', headers:{'Content-Type':'application/json'}, body:JSON.stringify({contents:[{parts:[{text:question}]}]}) }); const newton-data = await newton-res.json(); newton-responseDiv.textContent = newton-data?.candidates?.[0]?.content?.parts?.[0]?.text || 'No response from AI.'; } catch(e){ newton-responseDiv.textContent='Error: '+e.message; } }); </script> </body> </html> "></iframe> <script> const newton-dragBtn=document.getElementById('newton-dragBtn'); const iframe=document.getElementById('newton-myIframe'); let isDragging=false, dragStartX=0, dragStartY=0, offsetX=0, offsetY=0; newton-dragBtn.addEventListener('click', ()=> { if(!isDragging){ iframe.style.display='block'; dragBtn.style.display='none'; }}); window.addEventListener('message',(e)=>{ if(e.data==='closeIframe'){ iframe.style.display='none'; dragBtn.style.display='block'; }}); const startDrag=(e)=>{ e.preventDefault(); isDragging=false; dragStartX=e.type==='touchstart'?e.touches[0].clientX:e.clientX; dragStartY=e.type==='touchstart'?e.touches[0].clientY:e.clientY; offsetX=newton-dragBtn.offsetLeft; offsetY=newton-dragBtn.offsetTop; document.addEventListener('mousemove',dragMove); document.addEventListener('mouseup',stopDrag); document.addEventListener('touchmove',dragMove,{passive:false}); document.addEventListener('touchend',stopDrag); }; const dragMove=(e)=>{ e.preventDefault(); const clientX=e.type.startsWith('touch')?e.touches[0].clientX:e.clientX; const clientY=e.type.startsWith('touch')?e.touches[0].clientY:e.clientY; const deltaX=clientX-dragStartX; const deltaY=clientY-dragStartY; if(Math.abs(deltaX)>5||Math.abs(deltaY)>5){ isDragging=true; } if(isDragging){ let newX=offsetX+deltaX; let newY=offsetY+deltaY; const maxX=window.innerWidth-newton-dragBtn.offsetWidth; const maxY=window.innerHeight-newton-dragBtn.offsetHeight; newX=Math.max(0,Math.min(newX,maxX)); newY=Math.max(0,Math.min(newY,maxY)); newton-dragBtn.style.left=newX+'px'; newton-dragBtn.style.top=newY+'px'; } }; const stopDrag=()=>{ document.removeEventListener('mousemove',dragMove); document.removeEventListener('mouseup',stopDrag); document.removeEventListener('touchmove',dragMove); document.removeEventListener('touchend',stopDrag); }; dragBtn.addEventListener('mousedown',startDrag); dragBtn.addEventListener('touchstart',startDrag,{passive:false}); </script> </div> <!-- AI Chat Widget --> <div id="newton-ai-container" style="position:fixed;bottom:20px;right:20px;width:350px;height:450px;background:#fff;border:2px solid #000;border-radius:10px;box-shadow:0 0 10px rgba(0,0,0,0.2);display:none;z-index:99999;"> <div id="newton-ai-header" style="background:#000;color:#fff;padding:10px;font-weight:bold;display:flex;justify-content:space-between;align-items:center;"> AI Assistant <span id="newton-ai-close" style="cursor:pointer;font-size:18px;">Ã—</span> </div> <div id="newton-ai-chat" style="height:340px;overflow-y:auto;padding:10px;font-size:14px;"> <p><b>AI:</b> Hello! How can I help you?</p> </div> <div style="display:flex;border-top:1px solid #ccc;"> <input id="newton--ai-input" type="text" placeholder="Ask me anything..." style="flex:1;padding:10px;border:none;outline:none;"> <button id="newton-ai-send" style="background:#000;color:#fff;padding:10px;border:none;cursor:pointer;">Send</button> </div> </div> <!-- Toggle AI Button --> <button id="newton-ai-toggle" style="position:fixed;bottom:20px;right:20px;background:#000;color:#fff;padding:12px 18px;border:none;border-radius:50%;cursor:pointer;z-index:100000;"> ðŸ’¬ </button> <script> document.getElementById('newton-ai-toggle').addEventListener('click', function() { document.getElementById('newton-ai-container').style.display = 'block'; this.style.display = 'none'; }); document.getElementById('newton-ai-close').addEventListener('click', function() { document.getElementById('newton-ai-container').style.display = 'none'; document.getElementById('newton-ai-toggle').style.display = 'block'; }); document.getElementById('newton-ai-send').addEventListener('click', function() { const input = document.getElementById('newton-ai-input'); const message = input.value.trim(); if(message) { const chat = document.getElementById('newton-ai-chat'); chat.innerHTML += <p><b>You:</b> ${message}</p>; input.value = ''; chat.scrollTop = chat.scrollHeight; // AI Response using Gemini API fetch("https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash:generateContent?key=AIzaSyC5ab-HZmvtoTEXMRBMb4-tPpwD2yMVF1A", { method: "POST", headers: { "Content-Type": "application/json" }, body: JSON.stringify({ contents: [{ parts: [{ text: message }] }] }) }) .then(response => response.json()) .then(data => { let newtonAiReply = "Sorry, I couldn't generate a response."; if (data && data.candidates && data.candidates.length > 0) { newtonAiReply = data.candidates[0].content.parts[0].text; } const newtonAiChat = document.getElementById('newton-ai-chat'); chat.innerHTML += <p><b>AI:</b> ${newtonAiReply}</p>; chat.scrollTop = chat.scrollHeight; }) .catch(error => { console.error("Error:", error); const newtonAiChat = document.getElementById('newton-ai-chat'); chat.innerHTML += <p><b>AI:</b> There was an error connecting to the AI.</p>; chat.scrollTop = chat.scrollHeight; });
</script>
